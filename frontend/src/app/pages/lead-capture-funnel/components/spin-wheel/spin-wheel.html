<div class="spin-wheel-container">
  <!-- Background overlay -->
  <div class="overlay"></div>

  <!-- Main content -->
  <div class="content">
    <!-- Title -->
    <h2 class="title">
      <span class="title-highlight">GLÜCKSRAD DREHEN!</span>
      <span class="subtitle">Gewinne jetzt deinen Rabatt!</span>
    </h2>

    <!-- Wheel wrapper with canvas -->
    <div class="wheel-wrapper">
      <!-- Pointer/Arrow at top -->
      <div class="wheel-pointer">
        <svg width="40" height="60" viewBox="0 0 40 60" fill="none">
          <path d="M20 60L40 40L30 40L30 0L10 0L10 40L0 40Z" fill="#059669"/>
        </svg>
      </div>

      <!-- Canvas wheel -->
      <canvas #wheelCanvas class="wheel-canvas" width="400" height="400"></canvas>

      <!-- Center spin button -->
      <button
        *ngIf="!hasSpun"
        class="spin-button"
        [disabled]="angVel > 0"
        (click)="spinWheel()">
        {{ spinButtonText }}
      </button>
    </div>

    <!-- Prize announcement -->
    <div *ngIf="hasSpun" class="prize-announcement">
      <div class="prize-box">
        <div class="prize-icon">
          <svg viewBox="0 0 120 120" fill="none" xmlns="http://www.w3.org/2000/svg">
            <!-- Present box base -->
            <g class="present-box">
              <rect x="30" y="60" width="60" height="50" rx="4" fill="url(#presentGrad1)" stroke="#10B981" stroke-width="2.5"/>
            </g>

            <!-- Lid opening with animation (with ribbon on it) -->
            <g class="prize-lid">
              <rect x="28" y="52" width="64" height="12" rx="3" fill="url(#presentGrad2)" stroke="#059669" stroke-width="2.5"/>
              <!-- Horizontal ribbon on lid -->
              <rect x="28" y="56" width="64" height="4" fill="#FFD700" opacity="0.8"/>
              <!-- Vertical ribbon on lid -->
              <rect x="57" y="52" width="6" height="12" fill="#FFD700" opacity="0.9"/>
            </g>

            <!-- Big bow on top of lid -->
            <g class="prize-bow">
              <path d="M40 50 Q35 40 45 40 Q50 40 60 45 Q70 40 75 40 Q85 40 80 50"
                    fill="#FFD700" stroke="#FFA500" stroke-width="1.5"/>
              <circle cx="60" cy="50" r="7" fill="#FFD700"/>
              <ellipse cx="42" cy="43" rx="10" ry="7" fill="#FFD700"/>
              <ellipse cx="78" cy="43" rx="10" ry="7" fill="#FFD700"/>
            </g>

            <!-- Confetti bursting out -->
            <g class="prize-confetti">
              <rect class="confetti-piece" x="54" y="30" width="5" height="10" fill="#FFD700" rx="1.5"/>
              <circle class="confetti-piece" cx="68" cy="28" r="4" fill="#10B981"/>
              <rect class="confetti-piece" x="40" y="32" width="8" height="5" fill="#34D399" rx="1.5"/>
              <circle class="confetti-piece" cx="50" cy="25" r="3" fill="#FFD700"/>
              <rect class="confetti-piece" x="70" y="35" width="5" height="7" fill="#10B981" rx="1.5"/>
            </g>

            <!-- Glow from inside box -->
            <ellipse cx="60" cy="80" rx="20" ry="10" fill="#FFD700" opacity="0.3" class="prize-glow"/>

            <defs>
              <linearGradient id="presentGrad1" x1="0%" y1="0%" x2="100%" y2="100%">
                <stop offset="0%" stop-color="#10B981"/>
                <stop offset="100%" stop-color="#059669"/>
              </linearGradient>
              <linearGradient id="presentGrad2" x1="0%" y1="0%" x2="100%" y2="100%">
                <stop offset="0%" stop-color="#34D399"/>
                <stop offset="100%" stop-color="#10B981"/>
              </linearGradient>
            </defs>
          </svg>
        </div>
        <h3 class="prize-title">HERZLICHEN GLÜCKWUNSCH!</h3>
        <p class="prize-text">Du hast gewonnen:</p>
        <div class="prize-value">{{ prizeText }}</div>
        <p class="prize-info">Dein Gutschein wird dir per E-Mail zugeschickt!</p>
      </div>
    </div>

    <!-- Confetti effect -->
    <div *ngIf="showConfetti" class="confetti-container">
      <div class="confetti" *ngFor="let i of [1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50]"></div>
    </div>
  </div>
</div>
